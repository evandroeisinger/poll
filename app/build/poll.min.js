!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function a(e){e.preventDefault(),_.appendChild(p),m.appendChild(_),y.innerHTML="Autenticando",y.classList.add("poll__vote-button--processing"),g.captcha=grecaptcha.render(p,{sitekey:T,callback:s})}function i(e){e.preventDefault(),g.candidates.forEach(function(t){return t.id===e.currentTarget.id?(t.element.classList.add("poll__candidate--selected"),void(g.selected=t)):void t.element.classList.remove("poll__candidate--selected")}),y.disabled=!1}function r(e){e.id=e._id,e.votes=e.votes,e.result=Math.round(100*e.votes/g.votes)||0,e.element=document.createElement("span"),e.element.id=e.id,e.element.className="poll__candidate",e.element.innerHTML=['<figure class="poll__candidate-picture">','<img src="build/images/'+e.picture+'">',"</figure>",'<span class="poll__candidate-name">'+e.name+"</span>",'<span class="poll__candidate-result">'+e.result+"%</span>"].join(""),e.element.addEventListener("click",i),c.appendChild(e.element),g.candidates.push(e)}function o(){201===g.xhr.status&&(f=document.createElement("p"),f.className="poll__message",f.innerHTML="Parabéns! Seu voto para "+g.selected.name+" foi enviado com sucesso!",d.innerHTML="Resultado parcial",g.candidates.forEach(function(e){e.element.removeEventListener("click",i)}),c.classList.add("poll__candidates--results"),m.removeChild(y),m.removeChild(_),m.appendChild(f))}function s(){var e=JSON.stringify({token:grecaptcha.getResponse(g.captcha)});_.removeChild(p),y.innerHTML="Enviando voto",g.xhr=new XMLHttpRequest,g.xhr.addEventListener("load",o),g.xhr.open("post","/api/vote/"+g.id+"/"+g.selected.id),g.xhr.setRequestHeader(L,v),g.xhr.setRequestHeader("Content-Type","application/json;"),g.xhr.send(e)}function u(){var e;return c.classList.remove("poll__candidates--loading"),200!==g.xhr.status?(m.innerHTML="",d.innerHTML="Nenhum paredão inicializado",void m.appendChild(d)):(e=JSON.parse(g.xhr.response),g.id=e._id,g.votes=e.votes,e.candidates.forEach(r),void y.addEventListener("click",a))}function l(){m=document.querySelector(".poll__wrapper"),d=document.querySelector(".poll__title"),c=document.querySelector(".poll__candidates"),h=document.querySelector(".poll__actions"),y=document.querySelector(".poll__vote-button"),_=document.createElement("div"),p=document.createElement("div"),_.className="poll__overlay",p.className="poll__captcha",g={xhr:new XMLHttpRequest,selected:null,candidates:[]},g.xhr.addEventListener("load",u),g.xhr.open("get",M+"/poll/current"),g.xhr.setRequestHeader("Accept","application/json"),g.xhr.setRequestHeader(L,v),g.xhr.send(),y.disabled=!0,c.classList.add("poll__candidates--loading")}var d,c,h,p,_,m,f,y,g,M="http://"+document.location.host+"/api",v="5n3v9Ko5oDi0D6azGGUkQ9oevfgpXl3J",L="api-access-token",T="6LdJKQcTAAAAAEPFTcyy5buElr4Z1IF2g6E0_-dD";document.addEventListener("DOMContentLoaded",l)}]);